<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Jose Abell">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Using my gmshtranslator python tool to interface gmsh with&nbsp;opensees. | Jose Abell's Research Blog</title>

        <link rel="alternate" type="application/atom+xml" title="Jose Abell's Research Blog blog atom feed" href="/feeds/all.atom.xml" />
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
        <link rel="stylesheet" href="/theme/css/pygments.css">
        <link rel="stylesheet" href="/theme/css/main.css">


    </head>

    <body>
        <header class="main-header" style="background: url('/images/header.png') no-repeat center center #DDD; background-size: 100%;">
        <h1 id="title"> José Abell's research blog</h1>
        <hr>
        <nav>
            <div class="container">
            <ul>
                <li><a href="/" title="Home">Home</a></li>
                        <li><a href="http://www.joseabell.com/pages/01about.html">About</a></li>
                        <li><a href="http://www.joseabell.com/pages/02research.html">Research</a></li>
                        <li><a href="http://www.joseabell.com/pages/03teaching.html">Teaching</a></li>
                        <li><a href="http://www.joseabell.com/pages/04publications.html">Publications</a></li>
                        <li><a href="http://www.joseabell.com/pages/05tools.html">Tools</a></li>
                        <li><a href="http://www.joseabell.com/pages/06cv.html"><span class="caps">CV</span></a></li>
                        <li><a href="http://www.joseabell.com/pages/07links.html">Links</a></li>
                        <li><a href="http://www.joseabell.com/pages/08prospective-students.html">Prospective&nbsp;Students</a></li>
            </ul>
            </div>
        </nav>
        </header>

<div class="container post">

    <article>
        <header>
            <h1>Using my gmshtranslator python tool to interface gmsh with&nbsp;opensees.</h1>
            <time datetime="article.date.isoformat()" pubdate>Mon 26 February 2018</time>
        </header>

        <div class="article_content">
            <p>I wrote the <a href="https://github.com/jaabell/gmshtranslator"><em>gmshtranslator</em></a> tool a while back during my PhD, to easily parse <a href="http://gmsh.info/"><em>gmsh</em></a> <code>msh</code> files to any other format. I&#8217;ve been using it for years now with not much change for both research and consulting, and have been contacted by other researchers that want to use it. I will soon write a tool, powered by <em>gmshtranslator</em>, to more easily translate from <em>gmsh</em> into OpenSees. Meanwhile, here is a short example on how to use gmshtranslator to create <a href="opensees.berkeley.edu"><em>OpenSees</em></a> models. The example assumes you know <em>gmsh</em> formats (<code>.geo</code> and <code>.msh</code>) and&nbsp;python. </p>
<p>The example consists on the simple cantilever beam shown in the following&nbsp;figure.</p>
<p><img alt="Beam" src="https://www.dropbox.com/s/96dqfc5r6su4pjd/beam.png?raw=1"></p>
<p>The beam is fixed at the right end, and has node-by-node forcing on the right end. The following <em>gmsh</em> <code>.geo.</code> script prepares the&nbsp;domain. </p>
<p><strong><code>beam.geo :</code></strong></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">LX</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">LY</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span> <span class="n">Nx</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">Ny</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="n">LX</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="n">LX</span><span class="p">,</span> <span class="n">LY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">Point</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="n">LY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">Line</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">};</span>
<span class="n">Line</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
<span class="n">Line</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="n">Line</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">Line</span> <span class="nf">Loop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="n">Plane</span> <span class="nf">Surface</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">};</span>

<span class="n">Transfinite</span> <span class="n">Line</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span> <span class="o">=</span> <span class="n">Nx</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="n">Transfinite</span> <span class="n">Line</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span> <span class="o">=</span> <span class="n">Ny</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="n">Transfinite</span> <span class="n">Surface</span><span class="p">{</span><span class="mi">1</span><span class="p">};</span>
<span class="n">Recombine</span> <span class="n">Surface</span><span class="p">{</span><span class="mi">1</span><span class="p">};</span>

<span class="n">Physical</span> <span class="nf">Line</span><span class="p">(</span><span class="s">&quot;Fixed&quot;</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">};</span>
<span class="n">Physical</span> <span class="nf">Line</span><span class="p">(</span><span class="s">&quot;Forcing&quot;</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">};</span>
<span class="n">Physical</span> <span class="nf">Surface</span><span class="p">(</span><span class="s">&quot;Beam&quot;</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">};</span>

<span class="n">Mesh</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>3 physical groups are defined: <em>fixed</em> to identify the fixed nodes, <em>forcing</em> to identify the nodes that will carry loads, and <em>beam</em> contains all the quad elements to represent the body of the beam. Note the optional use of the transfinite meshing algorithm. Once this script is executed in <em>gmsh</em> the <code>.msh</code> file can be exported. The resulting <code>.msh</code> file can be found <a href="https://www.dropbox.com/s/3d44h0ttdrm67gz/beam.msh?dl=0">here</a>. </p>
<p><em>gmshtranslator</em> parses the <code>.msh</code> file, executing code depending on certain user-defined rules. What we want to do is define an opensees node command for each node in the <code>.msh</code> file, fix the nodes contained in the <em>fixed</em> physical group, generate forces for the nodes in the <em>forcing</em> physical group, and add quad elements for each quad in the <code>.msh</code> file. </p>
<p>First, import the <code>beam.msh</code> file into <em>gmshtranslator</em> and open files to be written that will contain the opensees&nbsp;code. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gmshtranslator</span> <span class="kn">import</span> <span class="n">gmshTranslator</span>

<span class="n">mshfname</span> <span class="o">=</span> <span class="s2">&quot;beam.msh&quot;</span>

<span class="n">gt</span> <span class="o">=</span> <span class="n">gmshTranslator</span><span class="p">(</span><span class="n">mshfname</span><span class="p">)</span>

<span class="n">fid_nodes</span> <span class="o">=</span>    <span class="nb">open</span><span class="p">(</span><span class="n">mshfname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.msh&quot;</span><span class="p">,</span> <span class="s2">&quot;.nodes.tcl&quot;</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">fid_elements</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">mshfname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.msh&quot;</span><span class="p">,</span> <span class="s2">&quot;.elements.tcl&quot;</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">fid_fixities</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">mshfname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.msh&quot;</span><span class="p">,</span> <span class="s2">&quot;.fixities.tcl&quot;</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">fid_loads</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">mshfname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.msh&quot;</span><span class="p">,</span> <span class="s2">&quot;.loads.tcl&quot;</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>I like writing different things (nodes, elements, etc.) in separate files for debugging. Your style might be different. <em>gmshtranslator</em> parses the file and evaluates <em>rules</em>. A rule is composed of a <em>condition</em> that must be met and an <em>action</em> to be executed, these are both python functions. There are rules for nodes and for&nbsp;elements. </p>
<p>The syntax for node and element conditions&nbsp;are:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">node_condition</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">physgroups</span><span class="p">):</span> 
<span class="k">def</span> <span class="nf">element_condition</span><span class="p">(</span><span class="n">eletag</span><span class="p">,</span><span class="n">eletype</span><span class="p">,</span><span class="n">physgrp</span><span class="p">,</span><span class="n">nodes</span><span class="p">):</span>
</pre></div>
</td></tr></table>

<p>These are functions that evaluate to <code>true</code> or <code>false</code> depending on the inputs. Then the syntax for <em>actions</em>&nbsp;are:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">node_action</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">element_action</span><span class="p">(</span><span class="n">eletag</span><span class="p">,</span><span class="n">eletype</span><span class="p">,</span><span class="n">physgrp</span><span class="p">,</span><span class="n">nodes</span><span class="p">):</span>
</pre></div>
</td></tr></table>

<p>These functions don&#8217;t return anything, instead excecute whatever code should be executed if the <em>condition</em> of the rule is met. Rules are added to the parser by using the <code>add_nodes_rule</code> or <code>add_elements_rule</code> function of <em>gmshtranslator</em> and are excecuted whenever the <code>parse()</code> method is&nbsp;called. </p>
<p>For example, the rule to add all nodes to the opensees domain would&nbsp;be:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_node</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">physgroups</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
    <span class="n">fid_nodes</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;node {} {} {}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

<span class="n">gt</span><span class="o">.</span><span class="n">add_nodes_rule</span><span class="p">(</span><span class="n">is_node</span><span class="p">,</span> <span class="n">add_node</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>The node <em>condition</em> (<code>is_node</code>) function always returns <code>true</code>, that is this rule will execute for all nodes. The <em>action</em> function is <code>add_node</code> and will write the appropriate text into the nodes file. The <em>rule</em> is added into the parser by using the <code>gt.add_nodes_rule</code> function which accepts two python functions as arguments: a condition and an&nbsp;action. </p>
<p>The code for the rest of the example&nbsp;is:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fix_node</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
    <span class="n">fid_fixities</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;fix {} 1 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">add_load</span><span class="p">(</span><span class="n">eletag</span><span class="p">,</span><span class="n">eletype</span><span class="p">,</span><span class="n">physgrp</span><span class="p">,</span><span class="n">nodes</span><span class="p">):</span>
    <span class="n">fid_loads</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;load {} $fx $fy</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">fid_loads</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;load {} $fx $fy</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

<span class="k">def</span> <span class="nf">add_element</span><span class="p">(</span><span class="n">eletag</span><span class="p">,</span><span class="n">eletype</span><span class="p">,</span><span class="n">physgrp</span><span class="p">,</span><span class="n">nodes</span><span class="p">):</span>
    <span class="n">fid_elements</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;element quad {} {} {} {} {} $thick PlaneStress $mat_tag</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">eletag</span><span class="p">,</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>


<span class="n">gt</span><span class="o">.</span><span class="n">add_nodes_rule</span><span class="p">(</span><span class="n">gt</span><span class="o">.</span><span class="n">is_node_in</span><span class="p">(</span><span class="s2">&quot;Fixed&quot;</span><span class="p">),</span> <span class="n">fix_node</span><span class="p">)</span>

<span class="n">gt</span><span class="o">.</span><span class="n">add_elements_rule</span><span class="p">(</span><span class="n">gt</span><span class="o">.</span><span class="n">is_element_in</span><span class="p">(</span><span class="s2">&quot;Forcing&quot;</span><span class="p">),</span> <span class="n">add_load</span><span class="p">)</span>
<span class="n">gt</span><span class="o">.</span><span class="n">add_elements_rule</span><span class="p">(</span><span class="n">gt</span><span class="o">.</span><span class="n">is_element_in</span><span class="p">(</span><span class="s2">&quot;Beam&quot;</span><span class="p">),</span> <span class="n">add_element</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Note that we didn&#8217;t write a condition for the <code>fix_node</code> action, instead we used some of the simple conditions contained in <em>gmshtranslator</em> that can simplify some typical situations. In this case the <code>gt.is_node_in()</code> function takes a physical group name and evaluates whether each node is in that physical group. An equivalent <code>python</code> code for this would&nbsp;be:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Fixed</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Physical group number assigned by gmsh to the &#39;Fixed&#39; group</span>
<span class="k">def</span> <span class="nf">is_node_in_Fixed</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">physgroups</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Fixed</span> <span class="ow">in</span> <span class="n">physgroups</span>
</pre></div>
</td></tr></table>

<p>Or using <em>gmstranslator</em>s internal&nbsp;mapping.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_node_in_Fixed</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">physgroups</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">gt</span><span class="o">.</span><span class="n">physical_groups_by_name</span><span class="p">[</span><span class="s1">&#39;Fixed&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">physgroups</span>\
</pre></div>
</td></tr></table>

<p>The same holds true for the <code>add_load</code> and <code>add_element</code> rules, I just opted to use the simple function but could have written a condition function from scratch.  Add all rules to the parser by callig the <code>add_X_rule</code> functions. Finally, call parse to execute and generate all output&nbsp;files. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">gt</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>Don&#8217;t forget to close files&nbsp;people!</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">fid_nodes</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fid_elements</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fid_fixities</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fid_loads</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>Run the python script and, voillá! Meshing&nbsp;done. </p>
<p>Finally, for completeness, here is the OpenSees tcl code that runs the complete example. I used elastic-isotropic material and a simple static analysis. I added only vertical loading on the tip of the&nbsp;beam. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">model</span> BasicBuilder <span class="o">-</span>ndm <span class="mi">2</span> <span class="o">-</span>ndf <span class="mi">2</span>

<span class="k">set</span> thick <span class="mf">1.0</span>

<span class="k">set</span> mat_tag <span class="mi">1</span>
<span class="k">set</span> E <span class="mi">200</span>.e9
<span class="k">set</span> nu <span class="mf">0.3</span>

<span class="nv">nDMaterial</span> ElasticIsotropic <span class="nv">$mat_tag</span> <span class="nv">$E</span> <span class="nv">$nu</span>

<span class="nb">source</span> <span class="s2">&quot;beam.nodes.tcl&quot;</span>
<span class="nb">source</span> <span class="s2">&quot;beam.fixities.tcl&quot;</span>
<span class="nb">source</span> <span class="s2">&quot;beam.elements.tcl&quot;</span>

<span class="k">set</span> tstag <span class="mi">1</span>
<span class="nv">timeSeries</span> Linear <span class="nv">$tstag</span> <span class="mf">1.0</span>

<span class="k">set</span> Ly <span class="mf">0.5</span>
<span class="k">set</span> Ny <span class="mi">5</span>
<span class="k">set</span> dy <span class="k">[expr</span> <span class="nv">$Ly</span><span class="o">/</span><span class="nv">$Ny</span><span class="k">]</span>

<span class="k">set</span> fx <span class="k">[expr</span> <span class="mi">0</span><span class="o">*</span><span class="nv">$dy</span><span class="o">/</span><span class="mi">2</span><span class="k">]</span>
<span class="k">set</span> fy <span class="k">[expr</span> <span class="o">-</span><span class="mi">10</span>.<span class="o">*</span><span class="nv">$dy</span><span class="o">/</span><span class="mi">2</span><span class="k">]</span>

<span class="nv">pattern</span> Plain <span class="mi">1</span> <span class="s2">&quot;Linear&quot;</span> <span class="k">{</span>
    <span class="nb">source</span> <span class="s2">&quot;beam.loads.tcl&quot;</span>
<span class="k">}</span>

<span class="nv">recorder</span> pvd disp disp

<span class="nv">constraints</span> Plain
<span class="nv">numberer</span> RCM
<span class="nv">system</span> UmfPack
<span class="nv">test</span> NormDispIncr <span class="mf">1.0</span>e-9 <span class="mi">10</span>
<span class="nv">algorithm</span> Newton
<span class="nv">integrator</span> LoadControl <span class="mi">1</span>
<span class="nv">analysis</span> Static
<span class="nv">analyze</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

<p>The <code>pvd</code> recorder is used to generate a nice output file that can be viewed using <a href="https://www.paraview.org/">paraview</a>. </p>
<p><img alt="Deflections" src="https://www.dropbox.com/s/24tkmfk1y1r0wz5/disp.png?raw=1"></p>
        </div>

        <div class="meta">
            <div>
                    <a href="http://www.joseabell.com/tag/opensees.html" class="tag">opensees</a>
                    <a href="http://www.joseabell.com/tag/gmsh.html" class="tag">gmsh</a>
                    <a href="http://www.joseabell.com/tag/gmshtranslator.html" class="tag">gmshtranslator</a>
                    <a href="http://www.joseabell.com/tag/python.html" class="tag">python</a>
                    <a href="http://www.joseabell.com/tag/pre-proceesing.html" class="tag">pre-proceesing</a>
                    <a href="http://www.joseabell.com/tag/meshing.html" class="tag">meshing</a>
            </div>
            <!-- <div>
                <a id="comments-button" class="comments_btn" href="#disqus_thread">Comments</a>
            </div> -->
        </div>
    </article>
</div>


<script type="text/javascript">
(function () {
    'use strict';

    // Global object
    var App = {};

    // Create button
    // App.commentsButton = document.getElementById('comments-button');

    // App.commentsButton.onclick = function () {
    //     // Remove button action on click
        // App.commentsButton.onclick = function () {
        // }

        // Create comments container
        App.disqusContainer = document.createElement('div');
        App.disqusContainer.setAttribute('id', 'disqus_thread');
        // App.disqusContainer.setAttribute('class', 'container');

        // Append container to body or div
        // document.body.appendChild( App.disqusContainer );
        var container = document.getElementsByClassName('container post')[0];
        container.appendChild(App.disqusContainer);

        // Your Disqus shortname
        App.disqus_shortname = 'joseabell';

        // Embed Disqus
        var dsq = document.createElement('script');

        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + App.disqus_shortname + '.disqus.com/embed.js';

        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

    //     window.scrollTo(0, dsq.offsetTop - 200);
    // };
})();
</script>


<!-- 
<script type="text/javascript">
    var disqus_shortname = 'joseabell';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
    }());
</script>
 -->



        <!-- Github buttons. -->
        <script async defer src="https://buttons.github.io/buttons.js"></script>
    </body>
</html>